"use strict";(self.webpackChunkproject_test_tweets=self.webpackChunkproject_test_tweets||[]).push([[511],{1511:function(e,t,r){r.r(t),r.d(t,{default:function(){return M}});var n=r(1413),s=r(3433),a=r(5861),c=r(9439),o=r(4687),u=r.n(o),i=r(1087),l=r(4383),f=r(4569),_=r.n(f);_().defaults.baseURL="https://6435ab5d83a30bc9ad671d0f.mockapi.io";var p=function(){var e=(0,a.Z)(u().mark((function e(t,r){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_().get(t,{params:{page:r,limit:6}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)(u().mark((function e(t,r){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_().put(t,r);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),m="UserCard_item__box__bCO4B",h="UserCard_item__icon__+3ZJL",v="UserCard_item__img__KmSHr",w="UserCard_item__boxContent__UNfyY",x="UserCard_item__content__UigYJ",b="UserCard_item__btn__G6hST",g="UserCard_item__following__q0zNa",U="UserCard_item__follow__oUIVF",j=r(184),k=function(e){var t=e.item,r=t.id,n=t.avatar,s=t.name,c=t.tweets,o=t.followers,i=t.isFollowing,f=e.updateState,_=function(){var e=(0,a.Z)(u().mark((function e(t,r,n){var s,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={followers:n?r-1:r+1,isFollowing:!n},e.next=3,d("/users/".concat(t),s);case 3:a=e.sent,f(a);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();return(0,j.jsxs)("div",{className:m,children:[(0,j.jsx)(l.r,{className:h}),(0,j.jsx)("img",{src:n,alt:s,className:v}),(0,j.jsxs)("div",{className:w,children:[(0,j.jsxs)("p",{className:x,children:[c," tweets"]}),(0,j.jsxs)("p",{className:x,children:[o.toLocaleString("en-US")," followers"]})]}),(0,j.jsx)("button",{onClick:function(){return _(r,o,i)},className:i?"".concat(g," ").concat(b):"".concat(U," ").concat(b),children:i?"following":"follow"})]})},L="UserList_linkGoBack__+crjK",N="UserList_usersList__YH9cS",C="UserList_usersList__item__bXLHJ",y="UserList_btnLoadMore__J4KUr",S=function(e){var t=e.items,r=e.makeMoreUsers,n=e.updateStateUser;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(i.Link,{to:"/",className:L,children:"Go back"}),(0,j.jsx)("ul",{className:N,children:t.map((function(e){return(0,j.jsx)("li",{className:C,children:(0,j.jsx)(k,{item:e,updateState:n})},e.id)}))}),(0,j.jsx)("button",{onClick:function(){return r(t)},className:y,children:"Load more..."})]})},Z=r(2791),F=r(5264),O=r(415),V="Filter_select__QmVYV",G=[{value:"all",label:"ALL"},{value:"follow",label:"FOLLOW"},{value:"followings",label:"FOLLOWINGS"}],J=function(e){var t=e.onVisible,r=function(){var e=(0,a.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p("/users");case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e.catch(0),F.Notify.failure("Sorry, the request could not be processed, try reloading the page!");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=(0,a.Z)(u().mark((function e(n){var s,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:s=e.sent,a=[],"follow"===n&&(a=s.filter((function(e){return!1===e.isFollowing}))),"followings"===n&&(a=s.filter((function(e){return e.isFollowing}))),"all"===n&&(a=s),t(a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,j.jsx)(O.ZP,{className:V,options:G,onChange:function(e){return n(e.value)}})},M=function(){var e=(0,Z.useState)([]),t=(0,c.Z)(e,2),r=t[0],o=t[1],i=(0,Z.useRef)(!1),l=function(){var e=(0,a.Z)(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Math.round(t.length/6+1),e.prev=1,e.next=4,p("/users",r);case 4:n=e.sent,o((function(e){return[].concat((0,s.Z)(e),(0,s.Z)(n))})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),F.Notify.failure("Sorry, the request could not be processed, try reloading the page!");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();(0,Z.useEffect)((function(){i.current||(i.current=!0,l(r))}),[i,r]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(J,{onVisible:o}),0!==r.length&&(0,j.jsx)(S,{items:r,makeMoreUsers:l,updateStateUser:function(e){o((function(t){return t.map((function(t){return t.id===e.id?(0,n.Z)((0,n.Z)({},t),e):t}))}))}})]})}}}]);
//# sourceMappingURL=511.ccfdfa16.chunk.js.map